/* styles/custom-components.css (最终修复版 V4.2 - 纯 Flexbox 布局) */

/* ... (保留顶部的全局沉浸模式规则) ... */
html.flashcard-mode-active { /* ... */ }
html.flashcard-mode-active body > #__next > :not(main),
/* ... 等等 */

/* ================================================================ */
/* 2. 全屏3D卡片 (PinyinPracticeCard) 最终样式 V4.2
/* ================================================================ */

.immersive-container-full {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 1rem 0;
  box-sizing: border-box;
  overflow: hidden;
}

.scene-container-full {
  width: 100%;
  height: 80%;
  max-height: 600px;
  perspective: 2000px;
  cursor: grab;
  position: relative;
  display: flex;
  justify-content: center;
}
.scene-container-full:active { cursor: grabbing; }

.cube-full { /* ... 保持不变 ... */ }
.cube-face-full { /* ... 保持不变 ... */ }
.immersive-card-overlay { /* ... 保持不变 ... */ }
.immersive-card-content { /* ... 保持不变 ... */ }

/* [核心修复] 使用纯 Flexbox 布局 */
.immersive-card-face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  display: flex;
  flex-direction: column;
  justify-content: space-between; /* 关键：在顶部、主内容、反馈和按钮之间分配空间 */
  align-items: center;
  color: white;
  padding: 1.5rem;
  text-align: center;
  text-shadow: 0 2px 15px rgba(0,0,0,0.6);
}
.immersive-card-face.back {
  background-color: rgba(30, 39, 46, 0.95);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: inherit;
  transform: rotateY(180deg);
  justify-content: center; /* 背面内容垂直居中 */
}

/* 布局元素 */
.top-spacer {
  flex-basis: 5%; /* 在顶部占据一点空间 */
}
.main-content {
  /* 无需特殊样式，Flexbox 会自动处理 */
}
.immersive-pinyin { font-size: 2rem; opacity: 0.9; font-weight: 400; }
.immersive-word { font-size: 5.5rem; font-weight: 700; margin-top: 0.5rem; }
.immersive-meaning { font-size: 2.8rem; font-weight: 500; }

/* 内置的拼音识别结果 */
.pinyin-comparison-inline {
  width: 100%;
  padding: 0.75rem;
  background-color: rgba(0,0,0,0.3);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  border-radius: 12px;
  min-height: 80px; /* 给予一个最小高度，避免内容跳动 */
}
.user-transcript { /* ... 保持不变 ... */ }
.syllable-track { /* ... 保持不变 ... */ }
.syllable-inline { /* ... 保持不变 ... */ }
.syllable-inline .error { /* ... 保持不变 ... */ }
.syllable-inline .correct { /* ... 保持不变 ... */ }

/* 卡片内置控制按钮 */
.immersive-card-controls {
  width: 100%;
  padding-top: 1rem; /* 与上方内容保持距离 */
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 4rem;
}
.immersive-card-controls button { /* ... 保持不变 ... */ }
.immersive-card-controls button.listening { /* ... 保持不变 ... */ }
@keyframes pulse-mic-btn { /* ... 保持不变 ... */ }
