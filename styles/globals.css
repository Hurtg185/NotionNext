/* styles/globals.css (已优化和美化) */

@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  overflow-x: hidden;
}

.wrapper {
  min-height: 100vh;
  display: flex;
  flex-wrap: nowrap;
  align-items: stretch;
  justify-content: flex-start;
  flex-direction: column;
}

/* ================================================================ */
/* 1. 核心布局与组件样式 (Core Layout & Components)
/* ================================================================ */

/* --- 顶部导航栏 --- */
.sticky-nav {
  position: sticky;
  z-index: 10;
  top: -1px;
  -webkit-backdrop-filter: blur(8px); /* 增加模糊度 */
  backdrop-filter: blur(8px);
  transition: all 0.5s cubic-bezier(0.4, 0, 0, 1);
  border-bottom-color: transparent;
}

.sticky-nav-full {
  @apply border-b border-gray-200/50 dark:border-gray-700/50;
}

.sticky-nav-full .nav {
  @apply text-gray-600 dark:text-gray-300;
}

@supports not (backdrop-filter: none) {
  .sticky-nav {
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
    @apply bg-white/80 dark:bg-gray-800/80; /* 增加透明度 */
  }
}

/* --- 模态框打开时的全局样式 --- */
body.modal-open {
  overflow: hidden; /* 禁止背景页面滚动 */
}

/* 假设底部导航栏的 class 为 .bottom-nav, 弹窗出现时隐藏 */
body.modal-open .bottom-nav {
  display: none !important;
}

/* --- 编辑资料模态框的统一样式 --- */
@layer components {
  .input-style {
    @apply mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500;
  }
}

/* ================================================================ */
/* 2. 功能性与美化样式 (Utility & Aesthetic Styles)
/* ================================================================ */

@layer components {
  /* --- 常用功能性样式 --- */
  .glassmorphism {
    background: hsla(0, 0%, 100%, 0.05);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }

  .forbid-copy {
    @apply select-none; /* 使用 Tailwind 的 select-none 更简洁 */
  }

  .writing-vertical {
    writing-mode: vertical-rl;
    text-orientation: upright;
  }

  /* --- 文本阴影 --- */
  .shadow-text {
    text-shadow: 0.1em 0.1em 0.2em black;
  }
  
  .text-shadow-lg {
    text-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
  }

  /* --- 卡片阴影 --- */
  .shadow-card {
    box-shadow:
      rgba(0, 0, 0, 0.07) 0px 1px 2px,
      rgba(0, 0, 0, 0.07) 0px 2px 4px,
      rgba(0, 0, 0, 0.07) 0px 4px 8px,
      rgba(0, 0, 0, 0.07) 0px 8px 16px,
      rgba(0, 0, 0, 0.07) 0px 16px 32px,
      rgba(0, 0, 0, 0.07) 0px 32px 64px;
  }
  
  /* --- 图片懒加载占位符动画 --- */
  .lazy-image-placeholder {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: placeholder-loading 1.5s infinite linear;
  }

  html.dark .lazy-image-placeholder {
    background: linear-gradient(90deg, #1f2937 25%, #374151 50%, #1f2937 75%);
    background-size: 200% 100%;
  }

  @keyframes placeholder-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
}

/* ================================================================ */
/* 3. 第三方库样式覆盖 (Third-party Library Overrides)
/* ================================================================ */

/* Waline, Twikoo, Webmention 等样式保持不变 */
/* ... (此部分代码省略，因为它们已经是最佳实践) ... */

/* 确保图片在布局中行为正常 */
img {
  display: unset;
}

.adsbygoogle {
  overflow: hidden;
}


/* ================================================================ */
/* 4. 全局美化滚动条 (Global Scrollbar Styling)
/* ================================================================ */

/* 适用于 Chrome, Edge, Safari */
::-webkit-scrollbar {
  width: 6px; 
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15); /* 颜色变浅 */
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* 深色模式适配 */
html.dark ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
}

html.dark ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* 适用于 Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;
}

html.dark * {
  scrollbar-color: rgba(255, 255, 255, 0.15) transparent;
}


/* ================================================================ */
/* 5. 【核心优化】头像呼吸光晕动画 (Avatar Glow Animation)
/* ================================================================ */

@keyframes avatar-glow-effect {
  0% {
    transform: scale(0.95);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.15); /* 扩散范围更大 */
    opacity: 0;
  }
  100% {
    transform: scale(1.15);
    opacity: 0;
  }
}

.avatar-glow {
  position: relative; /* 成为伪元素的定位父级 */
}

/* 这是光晕伪元素 */
.avatar-glow::before {
  content: '';
  position: absolute;
  /* 使用 inset-0 并通过 transform 调整大小，更灵活 */
  inset: 0;
  border-radius: 9999px; /* 保持圆形 */
  /* 使用更柔和的蓝色，并带透明度 */
  background-color: rgba(59, 130, 246, 0.5); /* bg-blue-500 with opacity */
  z-index: -1;
  pointer-events: none;
  /* 应用动画，设置为无限循环 */
  animation: avatar-glow-effect 2.5s ease-out infinite;
}


/* ================================================================ */
/* 6. 自定义网页元素屏蔽规则 (Custom Element Hiding Rules)
/* ================================================================ */
/* (这部分保持不变，因为是您的个人配置) */
#post-bg,
#article-end,
.article-end-wrapper,
#theme-heo > footer,
#color-transition {
    display: none !important;
}


/* --- 【新增】社区页面隐藏底部导航栏的规则 --- */
body.hide-bottom-nav #bottom-nav {
  display: none !important;
}
